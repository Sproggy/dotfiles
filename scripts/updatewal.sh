#!/bin/bash
# ██     ██              ██             ██
#░██    ░██ ██████      ░██            ░██
#░██    ░██░██░░░██     ░██  ██████   ██████  █████
#░██    ░██░██  ░██  ██████ ░░░░░░██ ░░░██░  ██░░░██
#░██    ░██░██████  ██░░░██  ███████   ░██  ░███████
#░██    ░██░██░░░  ░██  ░██ ██░░░░██   ░██  ░██░░░░
#░░███████ ░██     ░░██████░░████████  ░░██ ░░██████
# ░░░░░░░  ░░       ░░░░░░  ░░░░░░░░    ░░   ░░░░░░
#
# ██████████ ██
#░░░░░██░░░ ░██
#    ░██    ░██       █████  ██████████   █████
#    ░██    ░██████  ██░░░██░░██░░██░░██ ██░░░██
#    ░██    ░██░░░██░███████ ░██ ░██ ░██░███████
#    ░██    ░██  ░██░██░░░░  ░██ ░██ ░██░██░░░░
#    ░██    ░██  ░██░░██████ ███ ░██ ░██░░██████
#    ░░     ░░   ░░  ░░░░░░ ░░░  ░░  ░░  ░░░░░░
#
# by Sproggy (Corrie Tilcock) (2026)
# ----------------------------------------------------- 

echo "Changing theme..."

# ----------------------------------------------------- 
# Update Wallpaper with pywal
# ----------------------------------------------------- 
wal -q -i ~/Pictures/Wallpapers/

# ----------------------------------------------------- 
# Wait for 1 sec
# ----------------------------------------------------- 
sleep 1

# ----------------------------------------------------- 
# Get new theme
# ----------------------------------------------------- 
source "$HOME/.cache/wal/colors.sh"
newwall=$(echo $wallpaper | sed "s|$HOME/Pictures/Wallpapers/||g")

# ----------------------------------------------------- 
# Copy selected wallpaper into .cache folder
# ----------------------------------------------------- 
cp $wallpaper ~/.cache/current_wallpaper.png

sleep 1

# ----------------------------------------------------- 
# Send notification
# ----------------------------------------------------- 
notify-send "Colors and Wallpaper updated" "with image $newwall"

echo "Done."
